import socketimport osimport mimetypesHOST = '127.0.0.1'PORT = 8080WEB_ROOT = './www'def get_mime_type(path):    mime_type, _ = mimetypes.guess_type(path)    return mime_type or 'application/octet-stream'def handle_request(client_socket):    request = client_socket.recv(1024).decode()    if not request:        return    request_line = request.split('\n')[0]    method, path, _ = request_line.split()    print(f"[LOG] {method} request for {path}")    if method != 'GET':        response = "HTTP/1.1 405 Method Not Allowed\r\n\r\n"        client_socket.sendall(response.encode())        return    if path == '/':        path = '/index.html'    file_path = os.path.join(WEB_ROOT, path.lstrip('/'))    if os.path.isfile(file_path):        with open(file_path, 'rb') as f:            body = f.read()        mime_type = get_mime_type(file_path)        response = (            "HTTP/1.1 200 OK\r\n"            f"Content-Type: {mime_type}\r\n"            f"Content-Length: {len(body)}\r\n"            "\r\n"        ).encode() + body    else:        body = b"<h1>404 Not Found</h1>"        response = (            "HTTP/1.1 404 Not Found\r\n"            "Content-Type: text/html\r\n"            f"Content-Length: {len(body)}\r\n"            "\r\n"        ).encode() + body    client_socket.sendall(response)def run_server():    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server:        server.bind((HOST, PORT))        server.listen(5)        print(f"Server in ascolto su http://{HOST}:{PORT}")        while True:            client_socket, addr = server.accept()            with client_socket:                handle_request(client_socket)if __name__ == "__main__":    run_server()